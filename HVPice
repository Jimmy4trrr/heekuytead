local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "ğŸš© HEAVEN PIECE",
   LoadingTitle = "Performance...",
   LoadingSubtitle = "by KUYRAISUS",
   ConfigurationSaving = { Enabled = true, FolderName = "KuyraisusConfig", FileName = "HeavenPiece" }
})

_G.KillAuraAny = false
_G.InfAFK = false
_G.NoCD = { M1=false, Z=false, X=false, C=false, V=false, B=false, N=false, F=false }
_G.AntiLag = true

local MainTab = Window:CreateTab("Main Features", 4483362458)
local CombatTab = Window:CreateTab("Auto Combat", 4483362458)
local MisTab = Window:CreateTab("Misc/Settings", 4483362458)

MainTab:CreateSection("Monster Destroyer")

-- 2. à¸£à¸°à¸šà¸šà¸„à¹ˆà¸²à¸à¸¥à¸±à¸‡ (Leaderstats)
MainTab:CreateToggle({
   Name = "OP KILL",
   CurrentValue = false,
   Callback = function(v) _G.KillAuraAny = v end,
})

CombatTab:CreateSection("Skill No Cooldown Not work game Fix")

CombatTab:CreateToggle({
   Name = "Auto Click (M1)",
   CurrentValue = false,
   Callback = function(v) _G.NoCD.M1 = v end,
})

local skillKeys = {"Z", "X", "C", "V", "B", "N", "F"}
for _, key in pairs(skillKeys) do
    CombatTab:CreateToggle({
       Name = "Auto Press " .. key,
       CurrentValue = false,
       Callback = function(v) _G.NoCD[key] = v end,
    })
end

MisTab:CreateToggle({
   Name = "Anti-Lag",
   CurrentValue = true,
   Callback = function(v) _G.AntiLag = v end,
})

MisTab:CreateToggle({
   Name = "Anti-AFK",
   CurrentValue = false,
   Callback = function(v) _G.InfAFK = v end,
})

---
-- [[ LOGIC SYSTEM ]] --
---

local VIM = game:GetService("VirtualInputManager")

-- à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸ˆà¸³à¸¥à¸­à¸‡à¸à¸²à¸£à¸à¸”à¸›à¸¸à¹ˆà¸¡à¸„à¸µà¸¢à¹Œà¸šà¸­à¸£à¹Œà¸”
local function PressKey(key)
    local keyCode = Enum.KeyCode[key]
    VIM:SendKeyEvent(true, keyCode, false, game)
    task.wait(0.01)
    VIM:SendKeyEvent(false, keyCode, false, game)
end

-- 1. à¸£à¸°à¸šà¸š Auto Click M1 (0.1s)
task.spawn(function()
    while true do
        task.wait(0.1)
        if _G.NoCD.M1 then
            pcall(function()
                VIM:SendMouseButtonEvent(0, 0, 0, true, game, 1)
                task.wait(0.01)
                VIM:SendMouseButtonEvent(0, 0, 0, false, game, 1)
            end)
        end
    end
end)

-- 2. à¸£à¸°à¸šà¸š Auto Press Skills (à¸ˆà¸³à¸¥à¸­à¸‡à¸à¸²à¸£à¸à¸”à¸„à¸µà¸¢à¹Œà¸šà¸­à¸£à¹Œà¸” Z, X, C...)
task.spawn(function()
    while true do
        task.wait(0.2) -- à¸«à¸™à¹ˆà¸§à¸‡à¹€à¸§à¸¥à¸²à¹€à¸¥à¹‡à¸à¸™à¹‰à¸­à¸¢à¹€à¸à¸·à¹ˆà¸­à¹ƒà¸«à¹‰à¹„à¸¡à¹ˆà¸£à¸±à¸§à¸ˆà¸™à¹€à¸à¸¡à¸„à¹‰à¸²à¸‡
        pcall(function()
            local lp = game.Players.LocalPlayer
            if lp.Character and lp.Character.Humanoid.Health > 0 then
                for _, k in pairs({"Z", "X", "C", "V", "B", "N", "F"}) do
                    if _G.NoCD[k] then
                        PressKey(k)
                        task.wait(0.05) -- à¹€à¸§à¹‰à¸™à¸Šà¹ˆà¸§à¸‡à¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡à¸›à¸¸à¹ˆà¸¡
                    end
                end
            end
        end)
    end
end)

-- 3. à¸£à¸°à¸šà¸š OP KILL (à¸†à¹ˆà¸²à¸¡à¸­à¸™à¹€à¸¡à¸·à¹ˆà¸­à¹‚à¸”à¸™à¸”à¸²à¹€à¸¡à¸ˆ - à¸•à¸£à¸§à¸ˆà¸ˆà¸±à¸šà¸•à¸²à¸¡à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œà¹ƒà¸™à¸£à¸¹à¸›à¸ à¸²à¸)
local function MonitorMonster(monster)
    if monster:IsA("Model") then
        local hum = monster:WaitForChild("Humanoid", 5)
        if hum then
            hum.HealthChanged:Connect(function(health)
                if _G.KillAuraAny and health > 0 and health < hum.MaxHealth then
                    hum.Health = 0
                end
            end)
        end
    end
end

-- à¹€à¸£à¸´à¹ˆà¸¡à¸à¸²à¸£à¸”à¸±à¸à¸ˆà¸±à¸šà¸¡à¸­à¸™à¸ªà¹€à¸•à¸­à¸£à¹Œà¹ƒà¸™ workspace.Mod
for _, folder in pairs(workspace.Mod:GetChildren()) do
    for _, m in pairs(folder:GetChildren()) do task.spawn(MonitorMonster, m) end
    folder.ChildAdded:Connect(function(child) task.spawn(MonitorMonster, child) end)
end

-- 4. à¸£à¸°à¸šà¸š Anti-Lag & Anti-AFK
task.spawn(function()
    while true do
        task.wait(5)
        if _G.AntiLag then
            for _, v in pairs(workspace:GetDescendants()) do
                if v:IsA("ParticleEmitter") or v:IsA("Trail") then v.Enabled = false end
            end
        end
    end
end)

game:GetService("Players").LocalPlayer.Idled:Connect(function()
    if _G.InfAFK then
        VIM:CaptureController()
        VIM:ClickButton2(Vector2.new())
    end
end)
