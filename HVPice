local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "ğŸš© HEAVEN PIECE | FULL OPTIMIZED",
   LoadingTitle = "Restoring All Functions...",
   LoadingSubtitle = "by KUYRAISUS",
   ConfigurationSaving = { Enabled = true, FolderName = "KuyraisusConfig", FileName = "HeavenPiece" }
})

-- à¸à¸³à¸«à¸™à¸”à¸„à¹ˆà¸²à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™à¹ƒà¸«à¹‰à¸„à¸£à¸š
_G.KillAuraAny = false
_G.InfAFK = false
_G.NoCD = { M1=false, Z=false, X=false, C=false, V=false, B=false, N=false, F=false }
_G.AntiLag = true

-- à¸ªà¸£à¹‰à¸²à¸‡ Tab
local MainTab = Window:CreateTab("Main Features", 4483362458)
local CombatTab = Window:CreateTab("Combat Custom", 4483362458)
local MisTab = Window:CreateTab("Misc/Settings", 4483362458)

MainTab:CreateSection("Monster Destroyer")

-- 2. à¸£à¸°à¸šà¸šà¸„à¹ˆà¸²à¸à¸¥à¸±à¸‡ (Leaderstats) - à¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™à¸•à¸²à¸¡à¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚à¸—à¸µà¹ˆà¸•à¸±à¹‰à¸‡à¹„à¸§à¹‰à¸„à¸£à¸±à¸š
MainTab:CreateToggle({
   Name = "OP KILL (Smart & Smooth)",
   CurrentValue = false,
   Callback = function(v) _G.KillAuraAny = v end,
})

CombatTab:CreateSection("Skill No Cooldown")

local skillKeys = {"M1", "Z", "X", "C", "V", "B", "N", "F"}
for _, key in pairs(skillKeys) do
    CombatTab:CreateToggle({
       Name = "Fast " .. key,
       CurrentValue = false,
       Callback = function(v) _G.NoCD[key] = v end,
    })
end

MisTab:CreateToggle({
   Name = "Anti-Lag (Remove Effects)",
   CurrentValue = true,
   Callback = function(v) _G.AntiLag = v end,
})

MisTab:CreateToggle({
   Name = "Anti-AFK",
   CurrentValue = false,
   Callback = function(v) _G.InfAFK = v end,
})

---
-- [[ LOGIC SYSTEM ]] --
---

-- 1. à¸£à¸°à¸šà¸š OP KILL (à¹à¸šà¸šà¸¥à¸”à¸­à¸²à¸à¸²à¸£à¸à¸£à¸°à¸•à¸¸à¸)
local function MonitorMonster(monster)
    if monster:IsA("Model") then
        local hum = monster:WaitForChild("Humanoid", 5)
        if hum then
            hum.HealthChanged:Connect(function(health)
                if _G.KillAuraAny and health > 0 and health < hum.MaxHealth then
                    hum.Health = 0
                end
            end)
        end
    end
end

-- à¸ªà¹à¸à¸™à¸¡à¸­à¸™à¸ªà¹€à¸•à¸­à¸£à¹Œà¹ƒà¸™ workspace.Mod à¸—à¸¸à¸à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œà¸¢à¹ˆà¸­à¸¢
for _, folder in pairs(workspace.Mod:GetChildren()) do
    -- à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸•à¸±à¸§à¸—à¸µà¹ˆà¸¡à¸µà¸­à¸¢à¸¹à¹ˆà¹à¸¥à¹‰à¸§
    for _, m in pairs(folder:GetChildren()) do
        task.spawn(MonitorMonster, m)
    end
    -- à¸”à¸±à¸à¸ˆà¸±à¸šà¸•à¸±à¸§à¸—à¸µà¹ˆà¹€à¸à¸´à¸”à¹ƒà¸«à¸¡à¹ˆ
    folder.ChildAdded:Connect(function(child)
        task.spawn(MonitorMonster, child)
    end)
end

-- 2. à¸£à¸°à¸šà¸š No Cooldown (à¸à¸¥à¸±à¸šà¸¡à¸²à¸„à¸£à¸šà¸—à¸¸à¸à¸›à¸¸à¹ˆà¸¡)
task.spawn(function()
    while true do
        task.wait(0.05)
        pcall(function()
            local lp = game.Players.LocalPlayer
            if lp.Character then
                local combat = lp.Character:FindFirstChild("Combat")
                if combat then
                    -- Fast M1
                    if _G.NoCD.M1 and combat:FindFirstChild("Combo") then 
                        combat.Combo.C0:FireServer() 
                    end
                    -- Fast Skills
                    local skillEv = combat:FindFirstChild("Skill") and combat.Skill:FindFirstChild("SkillEvent")
                    if skillEv then
                        for _, k in pairs({"Z", "X", "C", "V", "B", "N", "F"}) do
                            if _G.NoCD[k] then skillEv:FireServer(k) end
                        end
                    end
                end
            end
        end)
    end
end)

-- 3. à¸£à¸°à¸šà¸š Anti-Lag
task.spawn(function()
    while true do
        task.wait(5)
        if _G.AntiLag then
            pcall(function()
                for _, v in pairs(workspace:GetDescendants()) do
                    if v:IsA("ParticleEmitter") or v:IsA("Trail") or v:IsA("Explosion") then
                        v.Enabled = false
                    end
                end
            end)
        end
    end
end)

-- 4. à¸£à¸°à¸šà¸š Anti-AFK
game:GetService("Players").LocalPlayer.Idled:Connect(function()
    if _G.InfAFK then
        game:GetService("VirtualUser"):CaptureController()
        game:GetService("VirtualUser"):ClickButton2(Vector2.new())
    end
end)
