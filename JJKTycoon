local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "Sorcerer Tycoon",
   LoadingTitle = "Loading Script...",
   LoadingSubtitle = "BY KUYRAISUS",
   ConfigurationSaving = { Enabled = false }
})

local player = game.Players.LocalPlayer
local SelectedTycoon = "" 
local WalkSpeedValue = 16 
_G.InfJump = false 

-- === Path Setup ===
local metroDrops = workspace.Map.Boss.Metro.Drops
local metroBosses = workspace.Map.Boss.Metro.Bosses
local worldDrops = workspace.Map.Boss.WorldBoss.Drops
local worldBosses = workspace.Map.Boss.WorldBoss.Bosses

local function isCharacterReady()
    return player.Character and player.Character:FindFirstChild("HumanoidRootPart") and player.Character:FindFirstChild("Humanoid") and player.Character.Humanoid.Health > 0
end

local function getMyTycoon()
    local tycoons = workspace:FindFirstChild("Map") and workspace.Map:FindFirstChild("Tycoons")
    if not tycoons or SelectedTycoon == "" then return nil end
    return tycoons:FindFirstChild(SelectedTycoon)
end

-- [Tabs]
local ConfigTab = Window:CreateTab("Setup Tycoon", 4483362458)
local MainTab = Window:CreateTab("Main Features", 4483362458)
local BossTab = Window:CreateTab("Auto Farm Boss", 4483362458)
local SkillTab = Window:CreateTab("Auto Skill/Key", 4483362458)
local SettingTab = Window:CreateTab("Settings", 4483362458)

-- === 1. Setup Tycoon ===
ConfigTab:CreateDropdown({
   Name = "Select Your Character Tycoon ‚öî",
   Options = {"TycoonGojo", "TycoonYuji", "TycoonToji", "TycoonMegumi", "TycoonChoso", "TycoonNanami", "TycoonNobara", "TycoonTodo", "TycoonToge", "TycoonHanami", "TycoonJogo"},
   CurrentOption = "",
   MultipleOptions = false,
   Callback = function(Option)
      SelectedTycoon = (type(Option) == "table" and Option[1]) or Option
      Rayfield:Notify({
          Title = "Notification", 
          Content = "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å " .. SelectedTycoon .. " ‡πÅ‡∏•‡πâ‡∏ß | ‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏∏ 2. ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡πà‡∏≤‡∏û‡∏•‡∏±‡∏á (Leaderstats)", 
          Duration = 5
      })
   end,
})

-- === 2. Main Features ===
_G.AutoCollect = false
MainTab:CreateToggle({ Name = "Auto Collect Money üí∏", CurrentValue = false, Callback = function(V) _G.AutoCollect = V end })

_G.AutoUpgrade = false
MainTab:CreateToggle({ Name = "Auto Upgrade (No TP) üöÄ", CurrentValue = false, Callback = function(V) _G.AutoUpgrade = V end })

_G.AutoRebirth = false
MainTab:CreateToggle({ Name = "Auto Rebirth üîÑ", CurrentValue = false, Callback = function(V) _G.AutoRebirth = V end })

-- === 3. Auto Farm Boss (Priority Mode) ===
_G.TriplePriorityFarm = false
BossTab:CreateToggle({ 
    Name = "Farm(Gojo > Jogo > Toji) üèÜ", 
    CurrentValue = false, 
    Callback = function(V) _G.TriplePriorityFarm = V end 
})

-- === 4. Auto Skill & Key ===
_G.AutoSkill = false
SkillTab:CreateToggle({ Name = "Auto M1 Attack ‚ö°", CurrentValue = false, Callback = function(V) _G.AutoSkill = V end })

_G.AutoPressKeys = false
SkillTab:CreateToggle({ Name = "Auto Press Skills (1-0) ‚å®", CurrentValue = false, Callback = function(V) _G.AutoPressKeys = V end })

-- === 5. Settings ===
SettingTab:CreateSlider({ Name = "WalkSpeed üèÉ‚Äç‚ôÄÔ∏è", Range = {16, 250}, Increment = 1, CurrentValue = 16, Callback = function(V) WalkSpeedValue = V end })
SettingTab:CreateToggle({ Name = "Infinite Jump ü¶ò", CurrentValue = false, Callback = function(V) _G.InfJump = V end })
SettingTab:CreateButton({ Name = "Enable Anti-AFK", Callback = function()
    local vu = game:GetService("VirtualUser")
    player.Idled:Connect(function()
        vu:Button2Down(Vector2.new(0,0),workspace.CurrentCamera.CFrame)
        task.wait(1)
        vu:Button2Up(Vector2.new(0,0),workspace.CurrentCamera.CFrame)
    end)
    Rayfield:Notify({Title = "Anti-AFK Enabled", Content = "Online ‚úÖ", Duration = 5})
end})

-- === [Loops System] ===

-- Loop: ‡∏ü‡∏≤‡∏£‡πå‡∏°‡∏ö‡∏≠‡∏™ 3 ‡∏ï‡∏±‡∏ß‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡∏≠‡∏á
task.spawn(function()
    while task.wait(0.1) do
        if _G.TriplePriorityFarm and isCharacterReady() then
            pcall(function()
                local hrp = player.Character.HumanoidRootPart
                
                -- [[ ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏ä‡πá‡∏Ñ Drops (‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡∏≠‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏ï‡∏µ‡πÄ‡∏™‡∏°‡∏≠) ]]
                local wDrops = worldDrops:GetChildren()
                local mDrops = metroDrops:GetChildren()

                if #wDrops > 0 then -- ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡∏≠‡∏á Gojo/Jogo (WorldBoss)
                    for _, drop in pairs(wDrops) do
                        local prompt = drop:FindFirstChild("Prompt") or drop:FindFirstChildOfClass("ProximityPrompt")
                        if hrp and prompt then
                            hrp.CFrame = drop:IsA("Model") and drop:GetModelCFrame() or (drop:IsA("BasePart") and drop.CFrame)
                            task.wait(0.15)
                            fireproximityprompt(prompt)
                        end
                    end
                elseif #mDrops > 0 then -- ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡∏≠‡∏á Toji (Metro)
                    for _, drop in pairs(mDrops) do
                        local prompt = drop:FindFirstChild("Prompt") or drop:FindFirstChildOfClass("ProximityPrompt")
                        if hrp and prompt then
                            hrp.CFrame = drop:IsA("Model") and drop:GetModelCFrame() or (drop:IsA("BasePart") and drop.CFrame)
                            task.wait(0.15)
                            fireproximityprompt(prompt)
                        end
                    end
                else
                    -- [[ ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 2: ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ï‡∏±‡∏ß‡∏ö‡∏≠‡∏™‡∏ï‡∏≤‡∏° Priority (Gojo > Jogo > Toji) ]]
                    local gojo, jogo, toji = nil, nil, nil

                    -- ‡∏´‡∏≤ Gojo (WorldBoss)
                    for _, b in pairs(worldBosses:GetChildren()) do
                        if b:GetAttribute("CharacterName") == "Gojo" and b.Humanoid.Health > 0 then gojo = b break end
                    end
                    -- ‡∏´‡∏≤ Jogo (WorldBoss)
                    for _, b in pairs(worldBosses:GetChildren()) do
                        if (b.Name:find("Jogo") or b:GetAttribute("CharacterName") == "Jogo") and b.Humanoid.Health > 0 then jogo = b break end
                    end
                    -- ‡∏´‡∏≤ Toji (Metro)
                    for _, b in pairs(metroBosses:GetChildren()) do
                        if b:GetAttribute("CharacterName") == "Toji" and b.Humanoid.Health > 0 then toji = b break end
                    end

                    -- ‡∏ß‡∏≤‡∏£‡πå‡∏õ‡πÑ‡∏õ‡∏ï‡∏µ‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö
                    if gojo then
                        hrp.CFrame = gojo.HumanoidRootPart.CFrame * CFrame.new(0, 0, 7)
                    elseif jogo then
                        hrp.CFrame = jogo.HumanoidRootPart.CFrame * CFrame.new(0, 0, 7)
                    elseif toji then
                        hrp.CFrame = toji.HumanoidRootPart.CFrame * CFrame.new(0, 0, 7)
                    end
                end
            end)
        end
    end
end)

-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏™‡∏£‡∏¥‡∏° (No-TP Upgrade, Auto Skill, Rebirth, etc.)
task.spawn(function()
    while true do
        if _G.AutoUpgrade and isCharacterReady() then
            pcall(function()
                local myTycoon = getMyTycoon()
                local purchases = myTycoon and (myTycoon:FindFirstChild("Purchases") or myTycoon:FindFirstChild("Purshases"))
                if purchases then
                    for _, folder in pairs(purchases:GetChildren()) do
                        local b = folder:FindFirstChild("base", true)
                        if b and b:IsA("BasePart") and b.Transparency < 1 then
                            firetouchinterest(player.Character.HumanoidRootPart, b, 0)
                            task.wait()
                            firetouchinterest(player.Character.HumanoidRootPart, b, 1)
                        end
                    end
                end
            end)
        end
        task.wait(1.5)
    end
end)

task.spawn(function()
    while true do
        if isCharacterReady() then
            if _G.AutoSkill and SelectedTycoon ~= "" then
                local charName = SelectedTycoon:gsub("Tycoon", "")
                game:GetService("ReplicatedStorage").Assets.Remotes.Skills.SKill:FireServer(charName, "M1_1")
            end
            if _G.AutoRebirth then game:GetService("ReplicatedStorage").Assets.Remotes.Tycoon.Rebirth:FireServer() end
            if _G.AutoCollect then
                local myTycoon = getMyTycoon()
                local base = myTycoon and myTycoon:FindFirstChild("Base")
                if base then
                    for _, v in pairs(base:GetDescendants()) do
                        if v.Name == "Collector" and v:IsA("BasePart") then
                            firetouchinterest(player.Character.HumanoidRootPart, v, 0)
                            task.wait()
                            firetouchinterest(player.Character.HumanoidRootPart, v, 1)
                        end
                    end
                end
            end
        end
        task.wait(0.3)
    end
end)

task.spawn(function()
    local vim = game:GetService("VirtualInputManager")
    local keys = {Enum.KeyCode.One, Enum.KeyCode.Two, Enum.KeyCode.Three, Enum.KeyCode.Four, Enum.KeyCode.Five, Enum.KeyCode.Six, Enum.KeyCode.Seven, Enum.KeyCode.Eight, Enum.KeyCode.Nine, Enum.KeyCode.Zero}
    while true do
        if _G.AutoPressKeys and isCharacterReady() then
            for _, key in ipairs(keys) do
                if not _G.AutoPressKeys then break end
                vim:SendKeyEvent(true, key, false, game)
                task.wait(0.05)
                vim:SendKeyEvent(false, key, false, game)
            end
        end
        task.wait(0.4)
    end
end)

task.spawn(function()
    while task.wait(0.1) do
        if isCharacterReady() then player.Character.Humanoid.WalkSpeed = WalkSpeedValue end
    end
end)

game:GetService("UserInputService").JumpRequest:Connect(function()
    if _G.InfJump and isCharacterReady() then player.Character.Humanoid:ChangeState("Jumping") end
end)

Rayfield:LoadConfiguration()
